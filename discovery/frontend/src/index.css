@import url('https://fonts.googleapis.com/css2?family=DM+Sans:ital,opsz,wght@0,9..40,400;0,9..40,500;0,9..40,600;0,9..40,700;1,9..40,400&family=Plus+Jakarta+Sans:wght@400;500;600;700;800&display=swap');

@tailwind base;
@tailwind components;
@tailwind utilities;

/* ============================================================================
   DISCOVERY DESIGN SYSTEM
   Minimalistic • Modern • Professional
   ============================================================================ */

@layer base {
  :root {
    /* Typography */
    --font-display: 'Plus Jakarta Sans', system-ui, sans-serif;
    --font-body: 'DM Sans', system-ui, sans-serif;

    /* Spacing rhythm */
    --space-unit: 4px;

    /* Border radius */
    --radius-sm: 6px;
    --radius-md: 10px;
    --radius-lg: 16px;
    --radius-xl: 24px;
    --radius-full: 9999px;

    /* Transitions */
    --transition-fast: 120ms ease-out;
    --transition-base: 200ms ease-out;
    --transition-slow: 350ms cubic-bezier(0.4, 0, 0.2, 1);

    /* Z-index layers */
    --z-base: 1;
    --z-dropdown: 100;
    --z-sticky: 200;
    --z-modal: 300;
    --z-toast: 400;
  }

  /* Dark theme (default) */
  :root {
    /* Background layers - deep charcoal progression */
    --bg-base: 222 16% 6%;
    --bg-elevated: 222 14% 9%;
    --bg-surface: 222 12% 12%;
    --bg-muted: 222 10% 16%;
    --bg-subtle: 222 8% 22%;

    /* Foreground hierarchy */
    --fg-default: 210 20% 98%;
    --fg-muted: 215 14% 70%;
    --fg-subtle: 215 10% 50%;
    --fg-faint: 215 8% 35%;

    /* Accent - soft cyan */
    --accent: 192 82% 55%;
    --accent-muted: 192 60% 45%;
    --accent-subtle: 192 40% 25%;
    --accent-glow: 192 82% 55% / 0.15;

    /* Semantic colors */
    --success: 152 70% 50%;
    --success-muted: 152 50% 35%;
    --warning: 38 92% 55%;
    --warning-muted: 38 70% 40%;
    --destructive: 0 72% 58%;
    --destructive-muted: 0 50% 40%;

    /* Priority tiers */
    --tier-high: 152 70% 50%;
    --tier-medium: 38 92% 55%;
    --tier-low: 215 14% 50%;

    /* Borders */
    --border-default: 222 10% 18%;
    --border-muted: 222 8% 14%;
    --border-accent: 192 60% 40%;

    /* Shadows */
    --shadow-sm: 0 1px 2px hsl(222 20% 4% / 0.3);
    --shadow-md: 0 4px 12px hsl(222 20% 4% / 0.4);
    --shadow-lg: 0 8px 24px hsl(222 20% 4% / 0.5);
    --shadow-glow: 0 0 32px hsl(var(--accent-glow));
  }

  /* Light theme */
  .light {
    --bg-base: 210 20% 98%;
    --bg-elevated: 210 16% 96%;
    --bg-surface: 210 14% 93%;
    --bg-muted: 210 12% 88%;
    --bg-subtle: 210 10% 82%;

    --fg-default: 222 16% 10%;
    --fg-muted: 222 10% 35%;
    --fg-subtle: 222 8% 50%;
    --fg-faint: 222 6% 65%;

    --accent: 192 82% 40%;
    --accent-muted: 192 60% 35%;
    --accent-subtle: 192 40% 85%;
    --accent-glow: 192 82% 50% / 0.1;

    --border-default: 210 12% 85%;
    --border-muted: 210 10% 90%;
    --border-accent: 192 60% 50%;

    --shadow-sm: 0 1px 2px hsl(222 10% 50% / 0.08);
    --shadow-md: 0 4px 12px hsl(222 10% 50% / 0.1);
    --shadow-lg: 0 8px 24px hsl(222 10% 50% / 0.12);
  }

  /* Base styles */
  html {
    font-family: var(--font-body);
    -webkit-font-smoothing: antialiased;
    -moz-osx-font-smoothing: grayscale;
    text-rendering: optimizeLegibility;
    scroll-behavior: smooth;
  }

  body {
    @apply bg-base text-default min-h-screen;
  }

  /* Selection styling */
  ::selection {
    background: hsl(var(--accent) / 0.3);
    color: hsl(var(--fg-default));
  }

  /* Scrollbar styling */
  ::-webkit-scrollbar {
    width: 8px;
    height: 8px;
  }

  ::-webkit-scrollbar-track {
    background: transparent;
  }

  ::-webkit-scrollbar-thumb {
    background: hsl(var(--fg-faint) / 0.3);
    border-radius: var(--radius-full);
  }

  ::-webkit-scrollbar-thumb:hover {
    background: hsl(var(--fg-faint) / 0.5);
  }

  /* Focus visible styles */
  *:focus-visible {
    outline: 2px solid hsl(var(--accent));
    outline-offset: 2px;
  }

  /* Typography scale */
  h1, h2, h3, h4, h5, h6 {
    font-family: var(--font-display);
    font-weight: 600;
    letter-spacing: -0.02em;
    line-height: 1.2;
  }

  /* Reduce motion */
  @media (prefers-reduced-motion: reduce) {
    *, *::before, *::after {
      animation-duration: 0.01ms !important;
      animation-iteration-count: 1 !important;
      transition-duration: 0.01ms !important;
    }
  }
}

@layer components {
  /* ============================================
     SURFACE COMPONENTS
     ============================================ */

  .surface {
    @apply bg-surface border border-border rounded-lg;
    box-shadow: var(--shadow-sm);
  }

  .surface-elevated {
    @apply bg-elevated border border-border rounded-lg;
    box-shadow: var(--shadow-md);
  }

  .surface-interactive {
    @apply surface cursor-pointer;
    transition: all var(--transition-base);
  }

  .surface-interactive:hover {
    @apply border-accent/30;
    box-shadow: var(--shadow-md);
    transform: translateY(-1px);
  }

  /* ============================================
     BUTTON VARIANTS
     ============================================ */

  .btn {
    @apply inline-flex items-center justify-center gap-2 font-medium rounded-md;
    @apply transition-all duration-200 ease-out;
    @apply disabled:opacity-50 disabled:cursor-not-allowed;
    font-family: var(--font-display);
    letter-spacing: -0.01em;
  }

  .btn-primary {
    @apply btn bg-accent text-white;
    @apply hover:brightness-110 active:brightness-95;
    box-shadow: 0 1px 2px hsl(var(--accent) / 0.3), inset 0 1px 0 hsl(0 0% 100% / 0.1);
  }

  .btn-secondary {
    @apply btn bg-bg-muted text-muted border border-border;
    @apply hover:bg-bg-subtle hover:text-default hover:border-border-accent/30;
  }

  .btn-ghost {
    @apply btn text-muted;
    @apply hover:bg-bg-muted hover:text-default;
  }

  .btn-destructive {
    @apply btn bg-destructive text-white;
    @apply hover:brightness-110;
  }

  /* Button sizes */
  .btn-xs { @apply px-2.5 py-1 text-xs; }
  .btn-sm { @apply px-3 py-1.5 text-sm; }
  .btn-md { @apply px-4 py-2 text-sm; }
  .btn-lg { @apply px-5 py-2.5 text-base; }
  .btn-xl { @apply px-6 py-3 text-lg; }

  /* Icon button */
  .btn-icon {
    @apply btn p-2 aspect-square;
  }

  /* ============================================
     INPUT COMPONENTS
     ============================================ */

  .input {
    @apply w-full px-3 py-2 text-sm;
    @apply bg-bg-muted text-default placeholder:text-subtle;
    @apply border border-border rounded-md;
    @apply transition-all duration-200;
    @apply focus:border-accent focus:ring-1 focus:ring-accent/30;
  }

  .input-lg {
    @apply input px-4 py-3 text-base;
  }

  /* ============================================
     BADGE VARIANTS
     ============================================ */

  .badge {
    @apply inline-flex items-center px-2 py-0.5 text-xs font-medium rounded-full;
    font-family: var(--font-display);
  }

  .badge-default {
    @apply badge bg-bg-muted text-muted;
  }

  .badge-accent {
    @apply badge bg-accent/15 text-accent;
  }

  .badge-success {
    @apply badge bg-success/15 text-success;
  }

  .badge-warning {
    @apply badge bg-warning/15 text-warning;
  }

  .badge-destructive {
    @apply badge bg-destructive/15 text-destructive;
  }

  /* Priority tier badges */
  .badge-tier-high {
    @apply badge bg-success/15 text-success;
  }

  .badge-tier-medium {
    @apply badge bg-warning/15 text-warning;
  }

  .badge-tier-low {
    @apply badge bg-bg-subtle text-subtle;
  }

  /* ============================================
     PROGRESS & SCORES
     ============================================ */

  .progress-bar {
    @apply h-1.5 bg-bg-muted rounded-full overflow-hidden;
  }

  .progress-bar-fill {
    @apply h-full bg-accent rounded-full;
    transition: width var(--transition-slow);
  }

  .score-pill {
    @apply inline-flex items-center gap-1.5 px-2 py-1 text-xs font-medium rounded-md;
    @apply bg-bg-muted;
    font-family: var(--font-display);
    font-variant-numeric: tabular-nums;
  }

  /* ============================================
     TOOLTIP
     ============================================ */

  .tooltip {
    @apply absolute z-50 px-2 py-1 text-xs font-medium;
    @apply bg-elevated text-default border border-border rounded-md;
    @apply opacity-0 pointer-events-none;
    @apply transition-opacity duration-150;
    box-shadow: var(--shadow-md);
  }

  [data-tooltip]:hover .tooltip {
    @apply opacity-100;
  }

  /* ============================================
     DROPDOWN / MENU
     ============================================ */

  .dropdown-menu {
    @apply absolute min-w-[180px] p-1;
    @apply bg-elevated border border-border rounded-lg;
    z-index: 100;
    box-shadow: var(--shadow-lg);
  }

  .dropdown-item {
    @apply flex items-center gap-2 px-3 py-2 text-sm text-muted;
    @apply rounded-md cursor-pointer;
    @apply transition-colors duration-150;
  }

  .dropdown-item:hover {
    @apply bg-bg-muted text-default;
  }

  .dropdown-divider {
    @apply my-1 h-px bg-border;
  }

  /* ============================================
     TAB NAVIGATION
     ============================================ */

  .tabs {
    @apply flex items-center gap-1 p-1 bg-bg-muted rounded-lg;
  }

  .tab {
    @apply px-3 py-1.5 text-sm font-medium text-muted rounded-md;
    @apply transition-all duration-200;
    font-family: var(--font-display);
  }

  .tab:hover {
    @apply text-default;
  }

  .tab-active {
    @apply tab bg-surface text-default;
    box-shadow: var(--shadow-sm);
  }

  /* ============================================
     SKELETON LOADING
     ============================================ */

  .skeleton {
    @apply bg-bg-muted rounded animate-pulse;
  }

  /* ============================================
     ANIMATIONS
     ============================================ */

  @keyframes fade-in {
    from { opacity: 0; }
    to { opacity: 1; }
  }

  @keyframes slide-up {
    from { opacity: 0; transform: translateY(8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes slide-down {
    from { opacity: 0; transform: translateY(-8px); }
    to { opacity: 1; transform: translateY(0); }
  }

  @keyframes scale-in {
    from { opacity: 0; transform: scale(0.95); }
    to { opacity: 1; transform: scale(1); }
  }

  @keyframes spin {
    from { transform: rotate(0deg); }
    to { transform: rotate(360deg); }
  }

  .animate-fade-in {
    animation: fade-in var(--transition-base) ease-out forwards;
  }

  .animate-slide-up {
    animation: slide-up var(--transition-slow) ease-out forwards;
  }

  .animate-slide-down {
    animation: slide-down var(--transition-slow) ease-out forwards;
  }

  .animate-scale-in {
    animation: scale-in var(--transition-slow) ease-out forwards;
  }

  .animate-spin {
    animation: spin 1s linear infinite;
  }

  /* Staggered animation delays */
  .stagger-1 { animation-delay: 50ms; }
  .stagger-2 { animation-delay: 100ms; }
  .stagger-3 { animation-delay: 150ms; }
  .stagger-4 { animation-delay: 200ms; }
  .stagger-5 { animation-delay: 250ms; }
  .stagger-6 { animation-delay: 300ms; }
}

@layer utilities {
  /* Background utilities */
  .bg-base { background-color: hsl(var(--bg-base)); }
  .bg-elevated { background-color: hsl(var(--bg-elevated)); }
  .bg-surface { background-color: hsl(var(--bg-surface)); }
  .bg-muted { background-color: hsl(var(--bg-muted)); }
  .bg-subtle { background-color: hsl(var(--bg-subtle)); }
  .bg-accent { background-color: hsl(var(--accent)); }
  .bg-success { background-color: hsl(var(--success)); }
  .bg-warning { background-color: hsl(var(--warning)); }
  .bg-destructive { background-color: hsl(var(--destructive)); }

  /* Text utilities */
  .text-default { color: hsl(var(--fg-default)); }
  .text-muted { color: hsl(var(--fg-muted)); }
  .text-subtle { color: hsl(var(--fg-subtle)); }
  .text-faint { color: hsl(var(--fg-faint)); }
  .text-accent { color: hsl(var(--accent)); }
  .text-success { color: hsl(var(--success)); }
  .text-warning { color: hsl(var(--warning)); }
  .text-destructive { color: hsl(var(--destructive)); }

  /* Border utilities */
  .border-border { border-color: hsl(var(--border-default)); }
  .border-muted { border-color: hsl(var(--border-muted)); }
  .border-accent { border-color: hsl(var(--border-accent)); }

  /* Display font */
  .font-display { font-family: var(--font-display); }
  .font-body { font-family: var(--font-body); }

  /* Gradient backgrounds */
  .bg-gradient-subtle {
    background: linear-gradient(
      135deg,
      hsl(var(--bg-base)) 0%,
      hsl(var(--bg-elevated)) 100%
    );
  }

  .bg-gradient-accent {
    background: linear-gradient(
      135deg,
      hsl(var(--accent)) 0%,
      hsl(var(--accent-muted)) 100%
    );
  }

  /* Glass effect */
  .glass {
    backdrop-filter: blur(12px) saturate(150%);
    background: hsl(var(--bg-elevated) / 0.8);
  }

  /* Noise texture overlay */
  .noise::before {
    content: '';
    position: absolute;
    inset: 0;
    background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 256 256' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noise'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.65' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noise)'/%3E%3C/svg%3E");
    opacity: 0.03;
    pointer-events: none;
  }

  /* Glow effects */
  .glow-accent {
    box-shadow: var(--shadow-glow);
  }

  /* Truncate with ellipsis */
  .truncate-2 {
    display: -webkit-box;
    -webkit-line-clamp: 2;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }

  .truncate-3 {
    display: -webkit-box;
    -webkit-line-clamp: 3;
    -webkit-box-orient: vertical;
    overflow: hidden;
  }
}
